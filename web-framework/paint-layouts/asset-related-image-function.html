<!--@@
Replace the #link_class# and #image_class# strings to add link and image classes to the result of this layout.
The replace keyword transformation is useful for this.
E.g:
  %asset_metadata_template.picture.picture^as_asset:asset_contents_paint_374698^replace:#image_class#:img-fluid^replace:#link_class#:link-gallery%
..adds the `link-gallery` class to the `a` tag, and `img-fluid` to the `img` tag.
@@-->
<script runat="server">
function outputImageHTML(image_classes)
  this.args = this.args || {}
  this.args.link_target_attribute = this.args.link_target_attribute || ''
  this.args.disable_link = this.args.disable_link || false
  this.args.override_url = this.args.override_url || ''
  
  image_classes = image_classes || ''

  var name = '%asset_attribute_title^escapequotes%' || '%asset_name^escapequotes%'
  var url = '%asset_url^escapequotes%'
  var asset_type = '%asset_type_code%'
  var file_type = '%asset_file_type%'
  var caption = '%asset_attribute_caption^escapequotes%'
  var thumbnail = '%asset_thumbnail%'
  var thumbnail_url = '%asset_thumbnail_url^escapequotes%'
  var thumbnail_title = '%asset_thumbnail_title^escapequotes%'
  var thumbnail_alt = '%asset_thumbnail_alt^escapequotes%'
  
  if (this.args.override_url != '' )
    url = this.args.override_url
    
  if (asset_type === 'image' || asset_type === 'thumbnail' || file_type === 'svg') {
    if (!this.args.disable_link)
      print('<a class="' + image_classes + '" href="' + url + '" data-mfp-caption="&lt;p class=\'h3\'&gt;' + name + '&lt;/p&gt; ' + caption + '">')
      
    print('  <img class="img-related ' + image_classes + '" src="' + url + '" alt="' + name + '">')
    
    if (!this.args.disable_link)
      print('</a>')
  } else if (thumbnail) {
    if (!this.args.disable_link)
      print('<a class="#link_class#" href="' + url + '" data-mfp-src="' + thumbnail_url + '" data-mfp-caption="' + name + '">')
      
    print('  <img class="img-related ' + image_classes + '" src="' + thumbnail_url + '" title="' + thumbnail_title + '" alt="' + thumbnail_alt + '">')
    
    if (!this.args.disable_link)
      print('</a>')
  }
  
  delete this.args
}
</script>
