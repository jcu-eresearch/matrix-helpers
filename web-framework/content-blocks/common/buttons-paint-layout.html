<script runat="server">
  this.args = this.args || {}
  function printButton(text, href, klass, target) {
    if (text) {
      print('<a class="' + klass + '" href="' + href + '"' + target + '>' + text + '</a>')
    }
  }

  function getTargetAttribute(btn_target) {
    if (btn_target == "empty") {
      return ""
    }

    return ' target="' + btn_target + '" rel="noopener noreferrer"'
  }

  var btn_class_prefix = (this.args.btn_class_prefix || '') + ' '
  var btn1_text = "%asset_metadata_template.buttons.btn1.text^escapehtml%"
  var btn1_link = "%asset_metadata_template.buttons.btn1.asset^as_asset:asset_url^striphtml^escapehtml%" || "%asset_metadata_template.buttons.btn1.url^striphtml^escapehtml%" || "#"
  var btn1_target = "%asset_metadata_template.buttons.btn1.target^striphtml^escapehtml%"
  var btn1_class = btn_class_prefix + "%asset_metadata_template.buttons.btn1.class^striphtml^escapehtml%"
  var btn2_text = "%asset_metadata_template.buttons.btn2.text^escapehtml%"
  var btn2_link = "%asset_metadata_template.buttons.btn2.asset^as_asset:asset_url^striphtml^escapehtml%" || "%asset_metadata_template.buttons.btn2.url^striphtml^escapehtml%" || "#"
  var btn2_target = "%asset_metadata_template.buttons.btn2.target^striphtml^escapehtml%"
  var btn2_class = btn_class_prefix + "%asset_metadata_template.buttons.btn2.class^striphtml^escapehtml%"
  var alignment = "%asset_metadata_template.buttons.alignment^escapequotes%" || "text-xs-center"

  if (JCU.debug) {
    print('<!-- Rendering "Buttons" paint layout for %asset_assetid% -->')
  }
  if (btn1_text || btn2_text) {
    if (this.args.wrapper) {
      print(this.args.wrapper.opening)
    }
    if (!this.omit_alignment) {
      print('<div class="' + alignment + '">')
    }

    printButton(btn1_text, btn1_link, btn1_class, getTargetAttribute(btn1_target))
    print(' ')
    printButton(btn2_text, btn2_link, btn2_class, getTargetAttribute(btn2_target))

    if (!this.omit_alignment) {
      print('</div>')
    }
    if (this.args.wrapper) {
      print(this.args.wrapper.closing)
    }
  }

  delete this.args
</script>
